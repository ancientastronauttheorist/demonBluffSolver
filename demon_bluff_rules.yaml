# demon_bluff_rules.yaml
schema_version: 2
mode: standard
game: Demon Bluff
source: steam+wiki.gg
last_checked: 2025-09-04
ignore_cycles: true

core:
  objective: "Execute exactly K evils shown by the village objective."
  counts_as_evil: [minion, demon, puppet]   # Wretch is NOT an executable evil
  outcasts_are_good: true                   # Bombardier/Drunk/Wretch are Good (with role-specific caveats)

table:
  layout: ring
  seats_named: true           # seats are addressed 1..N clockwise
  adjacency: wrap             # neighbors are (i-1, i+1) with wrap-around

truth_and_registration:
  default_truth:
    villager: true
    outcast: true
    minion: false
    demon: false
  exceptions:
    puppet:
      truthful: true
      can_be_corrupted: false
    drunk:
      truthful: false
      cannot_be_cured: true
    confessor:
      cannot_lie: true
  disguise_visibility:
    truthful_view: "Truthful characters see through Disguises and register Demons/Puppets as Evil."
    lying_or_corrupted_view: "Lying/Corrupted characters see the Disguised role and will mis-register Puppets as Good."

statuses:
  corruption:
    effect: "Character lies and their ability does not work. Alignment does not change."
    cured_by: [alchemist]
    initial_sources: [plague_doctor, pooka, poisoner]
    cannot_affect: [puppet]

setup_order:
  # “Round/start of village” resolution order for characters with start effects.
  # (Top acts first.)
  round_start:
    - baa
    - counsellor
    - pooka
    - poisoner
    - witch
    - puppeteer
    - plague_doctor
    - shaman
    - doppelganger
    - drunk
    - alchemist
    - baker
  notes:
    - "Puppeteer creates exactly one adjacent Puppet from a VILLAGER if possible. If no adjacent Villager, no Puppet."

actions:
  reveal:
    effect: "Shows the claimed (possibly Disguised) role and triggers that card’s 'info' (if any)."
    special:
      witch_blocks_last_card: true   # You cannot reveal the final unrevealed card while a Witch is alive
  execute:
    effect: "Kills a seat and reveals the TRUE role and alignment (removes Disguise)."
    special:
      knight:
        if_good: "Survives execution."
        if_corrupted: "Dies and deals +4 damage to the player."
      bombardier:
        lose_if_executed: true

duplicates:
  default: "Roles are unique."
  allowed_by:
    - shaman         # clone of a Villager role in play
    - baker          # converts a random unrevealed Good Villager into a Baker
    - doppelganger   # Disguises as a Villager in play (truthful)

logic_terms:
  pairs_of_evil: "Number of adjacent evil–evil pairs (for Knitter)."
  halves_for_architect: "When N is even, both exact midpoints are counted on each side."

compatibility:
  roles_file: characters.yaml
  omissions:
    - "No day/night or Endless-mode refresh rules."
    - "No scoring/health text; puzzle solver doesn’t require it."
